<% layout("/layouts/boilerplate") %>
    <div class="row mt-3">
        <div class="col-8 offset-2">
    <h1><%=listing.title%></h1>
            </div>
    <div class="card col-6 offset-3 show-card listing-card" ><!-- for design --> <!-- col-6 is a width -->
        <img src="<%=listing.image.url%>" class="card-img-top show-img" alt="listing_image">
  <div class="card-body">
    <p class="card-text">Owned By:<i><%=listing.owner.username%></i></p>
      
             <p class="card-text"><%=listing.description%></p>
       
      <p class="card-text"> &#8377;<%= listing.price?.toLocaleString("en-IN") || "N/A" %></p>
       <p class="card-text"><%=listing.location%></p>
       <p class="card-text"><%=listing.country%></p>
  
  </div>
    </div>


    <!-- <ul> --> <!-- ye sara upr image wale mei chle gya h -->
    <!-- <li><p><//%=listing.description%></p></li>
    <li><p>&#8377;<//%= listing.price?.toLocaleString("en-IN") || "N/A" %></p></li>
    ismei kch price mei value nahi hoga to N/A print krega-- -->
    <!-- <li><p><//%=listing.location%></p></li>
    <li><p><//%=listing.country%></p></li>
    </ul> --> 

     <%if(currUser && currUser._id.equals(currUser._id)){%>
        <!-- agr jb tkk user login nii krta h to tbtk ye dlte and edit hide kr dega -->
    <!-- ye jo user ka id listing owner ke id ke equal hogi tabhi buttnon show krwyeg  -->
   <div class="btns" style="margin-left: 100px; position: relative;">
    <a href="/listings/<%=listing._id%>/edit" class="btn btn-dark col-1 offset-2" style="background-color: red;">Edit</a>
 
    <form action="/listings/<%=listing._id%>?_method=DELETE" method="POST">
        <button class="btn btn-dark  offset-4">Delete</button>
    </form>
</div>
   <% }%>
 

    <!-- Review section -->
  
     <center>
    <div class="card col-6 offset-2" style="margin-left: 10px;">
    <% if(currUser) {%><!-- jb tkk user login nahi karta to hide kr dega review ko -->
        <h4>Leave a Review</h4>
        <form action="/listings/<%=listing._id%>/reviews" method="post" novalidate class="needs-validation">
            <div class="mb-3 mt-3">
                <!-- for rating -->
                <label for="rating">Rating</label>
                <input type="range" min="1" max="5" id="rating" name="review[rating]"class="form-range" >  
            </div>

   
            <div class="mb-3 mt-3">
                <label for="comment">Comments</label>
                <textarea name="review[comment]" id="comment" cols="30" rows="5" class="form-control" required></textarea>
            <div class="invalid-feedback">please add some comment for review </div>
            </div>
            <button class="btn btn-dark">Submit</button>
        </form>
    <%}%>
    </center>

    <br>
    <br>
     <!--    <h4>All reviews</h4>
        <ul>
        <//%for(review of listing.reviews){%>
            <li><//%=review.comment%>,<//%=review.rating%>stars</li>
        <//%}%>
        </ul> -->

         <!-- Card ke form mei store kryege -->
        <p>All Reviews</p>
        <div class="row">
         <%for(review of listing.reviews){%>
            <div class="card col-5 ms-3 mb-3">
                  <div class="card-body">
             <h5 class="card-title">@<%=review.author.username%></h5>
         <p class="card-text"><%=review.comment%></p>
            <p class="card-text"><%=review.rating%></p>
            </div>
            <form class="mb-3" action="/listings/<%=listing._id%>/reviews/<%=review._id%>?_method=DELETE" method="post">
                <button class="btn btn-sm btn-dark">Delete</button>
            </form>  
            </div>
        <%}%>
        </div>
        </div>
        </div>
    
 
